---
title: "博物馆数字资源管理系统PRD（按平台/系统/模块架构图）"
version: "v1.0"
status: "draft"
---

# 1. 一页摘要（结论先行）
## 1.1 一句话结论
建设一套“数字资源管理架构”，以**系统层（资源管理系统/数字文物库/数字多宝阁）**为业务入口，以**资源库层（影像/视频/模型资源库）**为统一资产底座，以**模块层（采集/利用/授权/展示/对外发布审核/长期保存/AI）**为可插拔能力，形成资源全生命周期闭环，并在影像资源库中落地**元数据体系（PREMIS、ANSI/NISO Z39.87）、检索体系（Elasticsearch + Milvus 混合检索）、存储体系（ZFS + PostgreSQL JSONB）、服务体系（Libvips 图像处理）**。

## 1.2 背景与问题
- 数字化生产持续增长：影像/视频/三维模型数量与体量快速提升，格式多、版本多、衍生文件多。
- 管理与利用脱节：资源入库后缺少标准化元数据与可追溯记录，导致检索困难、复用效率低。
- 授权与发布风险：对外发布缺少统一审核与授权链路，难以证明合规并控制分发版本。
- 长期保存诉求：需要校验和、事件记录、存储分层、迁移与修复闭环。

## 1.3 目标与边界
- 目标：资源可管（入库/编目/审核/权限/审计）、可找（检索/相似/过滤）、可用（衍生/切片/预览/交付）、可控（授权/发布/水印/分级）、可存（校验/备份/迁移/事件）。
- 非目标：不在本期强依赖“全自动 AI 编目”；不在本期覆盖“全馆所有业务系统统一主数据平台”。

# 2. 参考标准与术语
## 2.1 标准名称-核心内容-作用
| 标准名称 | 核心内容 | 作用 |
|---|---|---|
| OAIS (ISO 14721) | 开放档案信息系统参考模型 | 作为长期保存与交付闭环的功能对标：入库、存储、数据管理、访问、保存规划、管理。 |
| DDI (Data Documentation Initiative) | 数据文档规范 | 作为“可独立解读/可复用”的元数据方法论对标：字段级解释、缺失/未知口径、可复现要求。 |
| CoreTrustSeal | 受信任数字存储库要求 | 作为可信存储库治理对标：组织、数字对象管理、技术与安全的核心准则。 |
| PREMIS | 保存元数据字典 | 定义保存事件/对象/代理等，支撑长期保存的可追溯与可审计。 |
| ANSI/NISO Z39.87 | 数字静态图像技术元数据字典 | 规范影像技术元数据（如分辨率、色彩空间、压缩等），支撑可理解与可重用。 |
| IIIF | 影像互操作框架 | 支撑高分辨率影像切片、跨系统浏览与深度缩放。 |

## 2.2 关键术语
- 数字资产：被管理的资源对象（含主文件、衍生文件、元数据、权限与事件）。
- 资源库：面向某类资源的统一存储、索引、版本与服务能力（影像/视频/模型）。
- 衍生文件：由主文件生成用于预览/发布/检索的派生版本（缩略图、切片、转码、低清、水印版等）。
- 对外发布：面向公众或外部合作单位的交付/上线动作，必须经过授权与审核。

# 3. 总体架构（按图片：系统层 / 资源库层 / 模块层）
## 3.1 系统层（业务入口）
| 系统 | 定位 | 典型用户 | 关键能力（与模块层关系） |
|---|---|---|---|
| 资源管理系统 | 馆内生产与治理入口 | 采集/编目/审核/版权/管理员 | 调用采集、授权、发布审核、长期保存、AI、展示等模块并落到资源库 |
| 数字文物库 | 面向馆内专业内容的管理与利用 | 研究员/策展人/馆内用户 | 以影像/视频/模型资源为核心，提供检索、详情、引用、申请与内部复用 |
| 数字多宝阁 | 面向公众/展陈/传播 | 公众/运营 | 以“展示与传播”为主，调用展示模块与发布审核输出对外内容 |

## 3.2 资源库层（资产底座）
| 资源库 | 管理对象 | 核心差异 | 统一要求 |
|---|---|---|---|
| 影像资源库 | 静态图像（含超高清） | 强依赖切片/深度缩放/色彩管理 | 统一ID、版本、校验和、权限、事件、索引、衍生文件管理 |
| 视频资源库 | 视频/音频 | 强依赖转码、多码率、关键帧与预览 | 同上，并补充转码策略与播放控制 |
| 模型资源库 | 3D 模型/点云/贴图 | 强依赖格式与渲染、贴图关系 | 同上，并补充表示信息与渲染衍生 |

## 3.3 模块层（可插拔业务能力）
| 模块 | 目标 | 关键输出 | 依赖 |
|---|---|---|---|
| 资源采集模块 | 把资源与最小元数据可靠带入系统 | 入库批次、质检结果、资源主文件 | 资源库、任务中心、存储 |
| 资源利用模块 | 面向馆内复用与运营的使用能力 | 检索、预览、下载/申请、引用 | 检索体系、权限、展示 |
| 资源授权模块 | 建立权利与许可闭环 | 权利状态、许可、到期提醒、使用范围 | 审批流、审计日志 |
| 资源展示模块 | 面向对内/对外展示 | 切片/缩略、详情页、IIIF 访问（影像） | 衍生服务、发布审核 |
| 对外发布审核模块 | 将对外发布控制为“可审计流程” | 发布工单、审核记录、上线包/交付包 | 授权模块、展示模块 |
| 长期保存模块 | 确保长期可验证与可追溯 | 校验和、Fixity 校验、迁移/修复事件、存储分层 | 存储平台、PREMIS |
| 人工智能模块 | 提升编目与检索效率 | 自动标签、相似检索向量、辅助质检 | 向量库、人工校正 |

# 4. 影像资源库（按图：数据层/索引层/服务层/展示层）
本节是“影像资源库”的落地设计，视频/模型资源库可复用同一框架并在格式与衍生能力上扩展。

## 4.1 数据层：元数据体系
### 4.1.1 元数据分层（共享 + 分类）
- 共享元数据设计：跨影像/视频/模型共同字段（标识、权利、状态、事件、归属等）。
- 分类元数据设计：影像/视频/模型各自特有字段（影像技术元数据、视频编码参数、模型格式与材质等）。

### 4.1.2 元数据类别（与标准映射）
| 类别 | 核心字段示例 | 标准对标 | 作用 |
|---|---|---|---|
| 管理元数据 | 版本状态、创建/修改人、入库时间、数字化过程记录、责任部门 | CoreTrustSeal（流程证据） | 让“谁做了什么”可追溯 |
| 技术元数据 | 分辨率、色深、色彩空间、压缩方式、采集设备信息 | ANSI/NISO Z39.87 | 支撑可理解/可重用 |
| 保存元数据 | Hash 校验、迁移记录、存储位置、副本、修复记录 | PREMIS | 支撑长期保存与审计 |
| 描述元数据 | 标题、制作者、年代、主题词/关键字、内容摘要、关联藏品/展览 | 受控词表/馆内规范 | 支撑检索与发现 |
| 结构元数据 | 资源集合结构、图像序列关系、主/衍生/贴图关系、页码/卷册 | IIIF/馆内规范 | 支撑展示与打包交付 |

### 4.1.3 色彩与显示（影像特性）
- 色彩空间：至少覆盖 sRGB / AdobeRGB 的标识与转换策略。
- 表示信息：记录“如何正确解释图像比特”的必要信息（格式/色彩/压缩/解码依赖），并纳入长期保存模块。

## 4.2 数据层：存储体系
| 子系统 | 技术选型（按图） | 作用 |
|---|---|---|
| 文件系统 | ZFS | 可靠存储主文件与衍生文件，支撑快照/校验/容量管理（视部署策略） |
| 数据库 | PostgreSQL（JSONB 存储） | 存储元数据、关系与事件结构化信息，支持灵活扩展字段 |

## 4.3 索引层：检索体系
| 能力 | 技术选型（按图） | 说明 |
|---|---|---|
| 元数据检索 | Elasticsearch | 多字段检索、过滤、聚合、排序 |
| 向量检索 | Milvus | 相似检索、以图搜图（向量） |
| 混合检索 | ES + Milvus | 关键字 + 向量融合排序（可配置权重） |
| 受控词表检索 | 词表服务 | 主题词、分类、地名、人名等统一口径 |

## 4.4 服务层：影像处理服务
- 基础处理库：Libvips（按图）
- 必备能力：
  - 缩略图生成
  - 切片图生成（深度缩放）
  - 格式转换（如 TIFF/JPEG/PNG/WebP 等，具体可配置）
  - 水印/脱敏（与授权/发布联动）

## 4.5 展示层：交付与呈现
- 多维度检索与展示：关键字、过滤、聚合、受控词表、相似检索入口。
- 缩略图瀑布流展示：按权限展示不同分辨率/水印策略。
- 详情页：主文件信息、衍生文件、元数据、权利状态、引用/申请入口、事件摘要。
- 数字资产生命周期管理：状态、版本、审核链、发布记录、保存健康度。
- 统计与仪表盘：入库量、质检通过率、授权分级、对外发布量、Fixity 校验结果、热度排行。

# 5. 需求拆解（按模块层）
以下为各模块的 P0/P1 需求清单，作为后续迭代拆分依据。

## 5.1 资源采集模块（P0）
| 编号 | 需求点 | 业务规则 | 验收标准（可测试） |
|---|---|---|---|
| R-I-1 | 批次导入与断点续传 | 支持大批量；失败可重试与导出错误清单 | 导入 1 万张影像成功率≥99%，失败项可重试 |
| R-I-2 | 提交协议校验 | 必填元数据最小集、命名规则、格式白名单、权利声明 | 不满足规则的 SIP 被拒收或进入待补齐队列 |
| R-I-3 | 去重与质检队列 | 基于指纹/校验和/相似策略去重（可配置） | 重复提交可识别并提示处理策略 |

## 5.2 资源利用模块（P0）
- 检索：ES 多字段检索 + 过滤 + 聚合；支持权限过滤。
- 相似检索：基于 Milvus 的以图搜图入口（与 AI 模块联动）。
- 申请/下载：受控下载（按权限生成对应版本的交付物）。

## 5.3 资源授权模块（P0）
- 权利状态：自有/合作/受限/未知；未知默认禁止对外交付。
- 许可与范围：用途、地域、期限、可下载级别、是否可改作。
- 到期提醒：到期自动冻结对外交付并记录审计。

## 5.4 资源展示模块（P0）
- 影像：切片深度缩放（IIIF 兼容输出为 P1，可先做内部切片服务）。
- 详情页：元数据/权利/版本/衍生文件/引用信息展示。
- 展示策略：按权限输出不同分辨率/水印/脱敏版本。

## 5.5 对外发布审核模块（P0）
- 发布工单：选资源→选用途/渠道→自动检查授权→提交审核。
- 审核链：支持退回与原因；所有操作写审计日志。
- 交付包：形成对外发布包（DIP），含交付文件与必要说明。

## 5.6 长期保存模块（P0/P1）
- P0：入库生成校验和；定期 Fixity 校验；校验失败告警与修复流程；PREMIS 事件记录。
- P1：格式风险清单、迁移策略与回滚；表示信息管理。

## 5.7 人工智能模块（P1）
- 自动标签/识别：产出候选标签，必须支持人工校正与回写审计。
- 向量生成：生成检索向量并写入向量库；支持重算与版本化。

# 6. 权限模型（RBAC）
| 角色 | 采集导入 | 质检 | 编目 | 审核 | 授权配置 | 对外发布 | 下载/导出 | 审计查看 |
|---|---:|---:|---:|---:|---:|---:|---:|---:|
| 采集人员 | ✓ |  |  |  |  |  |  |  |
| 质检员 |  | ✓ |  |  |  |  |  | ✓ |
| 编目员 |  |  | ✓ |  |  |  |  | ✓ |
| 审核员 |  | ✓ | ✓ | ✓ |  | ✓（审批） |  | ✓ |
| 版权管理员 |  |  |  | ✓（授权审核） | ✓ | ✓（约束） | ✓（受控） | ✓ |
| 研究员/策展人 |  |  |  |  |  |  | ✓（受控） |  |
| 系统管理员 | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ | ✓ |

# 7. 非功能需求（NFR）
- 性能：10 万条资源元数据下，常用检索 P95 < 2s（可按环境调整）；切片与缩略生成支持异步队列。
- 可用性：关键链路（检索/预览/授权校验）提供 SLA 指标与降级策略。
- 安全：最小权限；对外交付必须经过授权与审核；审计日志追加写。
- 可靠性：导入/衍生生成任务幂等；失败可重试；断点续传。
- 可观测：入库失败率、Fixity 失败、导出拒绝、权限异常、队列堆积告警。

# 8. 验收标准（节选）
```gherkin
Scenario: 对外发布必须通过授权与审核
  Given 某资源权利状态为未知或已到期
  When 用户提交对外发布工单
  Then 系统拦截并提示补齐授权或调整发布策略，同时记录审计日志

Scenario: 影像衍生文件生成与权限展示
  Given 某影像资源已入库并完成切片与缩略生成
  When 无权限用户访问详情页
  Then 仅展示受控预览与水印版本，不提供原图导出入口

Scenario: Fixity 校验失败闭环
  Given 系统定期校验发现某AIP校验和不一致
  When 触发修复流程
  Then 产生告警、记录PREMIS事件，修复后再次校验通过
```

# 9. 待确认决策点（≤5）
1) “数字文物库/数字多宝阁”对外/对内的边界与内容发布规则？  
2) 影像资源库的首选格式策略（主文件与衍生文件格式、切片规范）？  
3) 权利状态枚举与默认策略（未知/受限的默认拦截范围）？  
4) Fixity 校验频率、修复责任与RPO/RTO目标值？  
5) 受控词表与元数据模板的治理流程（谁维护、如何版本化、如何回滚）？  

