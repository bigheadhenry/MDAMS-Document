---
title: "博物馆数字资源管理系统（MDAMS）PRD（基于 reference 全量资料重写）"
version: "v1.0"
status: "draft"
sources:
  - "reference/MDAMS系统概要设计文档（Museum+Digital+Asset+Management+System）.pdf"
  - "reference/DATA_INGEST_ARCHITECTURE.md"
  - "reference/影像系统描述和管理元数据架构.xlsx（全部 sheet）"
  - "reference/资源管理需求表.xlsx（全部 sheet）"
  - "reference/文物二维影像元数据思维导图.png（OCR）"
  - "reference/架构流程图-流程图.jpg（OCR）"
---

# 1. 一页摘要
## 1.1 一句话结论
建设一套“数字资源管理架构”，以**系统层（资源管理系统 / 数字文物库 / 数字多宝阁）**为入口，以**资源库层（影像 / 视频 / 模型资源库）**为资产底座，以**模块层（采集 / 利用 / 授权 / 展示 / 对外发布审核 / 长期保存 / 人工智能）**为可插拔能力，形成资源全生命周期闭环；影像资源库以 **PREMIS、ANSI/NISO Z39.87、IIIF、Elasticsearch+Milvus、ZFS、PostgreSQL JSONB、Libvips** 等体系与组件落地。

## 1.2 背景与问题
- 资源类型多且体量大：影像（超高清）、视频、三维模型等；主文件与衍生文件并存。
- 管理与利用链路不闭环：元数据口径不统一、版本重复干扰检索、授权与发布流程缺少强约束与审计。
- 长期保存需要标准化：入库完整性校验、保存事件记录、可追溯与可验证、按需打包交付。

## 1.3 目标（高优先级）
- 资源可管：入库/编目/审核/版本/权限/审计闭环。
- 资源可找：元数据检索 + 受控词表检索 + 向量相似检索 + 混合检索；支持“只看最新年份图片”去重展示。
- 资源可用：收藏/购物车/利用单/申请单全链路；支持局部截取、规格批量修改、交付包生成。
- 资源可控：授权与对外发布审核分离；对外交付可控版本（派生/水印/脱敏）并记录审计。
- 资源可存：Fixity 校验、BagIt 打包、OAIS 框架对标、PREMIS/METS 元数据与事件记录。

## 1.4 非目标
- 不把 AI 自动编目作为本期强依赖（先做“可用的 AI 辅助 + 人工校正 + 审计”）。
- 不覆盖全馆所有业务系统统一主数据治理平台（先在 MDAMS 内建立必要的词表与关联对象）。

# 2. 参考标准与术语
## 2.1 标准与规范（标准名称-核心内容-作用）
| 标准名称 | 核心内容 | 作用 |
|---|---|---|
| OAIS (ISO 14721) | 开放档案信息系统参考模型 | 作为长期保存与交付闭环的功能对标：入库、存储、数据管理、访问、保存规划、管理。 |
| DDI (Data Documentation Initiative) | 数据文档规范 | 作为“可独立解读/可复用”的元数据方法论对标：字段级解释、缺失/未知口径、可复现要求。 |
| CoreTrustSeal | 受信任数字存储库要求 | 作为可信存储库治理对标：组织、数字对象管理、技术与安全的核心准则。 |
| PREMIS | 保存元数据字典 | 规范保存对象/事件/代理等，支撑长期保存可追溯与可审计。 |
| ANSI/NISO Z39.87-2006 (R2017) | 数字静态图像技术元数据字典 | 规范影像技术元数据（格式、分辨率、色彩空间、Fixity 等），支撑影像可理解与可重用。 |
| IIIF | 国际图像互操作框架 | 支撑影像切片、跨系统浏览与深度缩放；与 Mirador 等前端查看器对接。 |
| BagIt | 数字对象打包规范 | 支撑按需生成可校验的交付/交换包（manifest、payload）。 |
| METS | 元数据编码与传输标准 | 用于组织描述性/技术性/结构性元数据，便于长期保存与交换。 |

## 2.2 术语表（本 PRD 口径）
- 数字资产：被管理的资源对象（主文件 + 衍生文件 + 元数据 + 权利 + 事件记录）。
- 资源库：面向某一类资产的统一存储、版本、索引、服务能力（影像/视频/模型）。
- 衍生文件：由主文件生成用于预览/发布/检索的派生版本（缩略图、切片、转码、低清、水印版等）。
- 代表影像：同一文物关联多张影像时用于展示/检索聚合的“首选影像”。
- SIP/AIP/DIP：按 OAIS 口径定义的提交包/保存包/分发包（本项目入库架构采用“分离式 SIP”传输形态）。

# 3. 总体架构（平台 / 系统 / 模块）
本节结构以 `资源管理需求表.xlsx` 的“系统层级与模块关系表”与 PDF 概要设计为准，并补充流程图 OCR 的系统对接信息。

## 3.1 系统层（入口系统）
| 系统 | 定位 | 典型用户 | 关键能力（与模块/资源库关系） |
|---|---|---|---|
| 资源管理系统 | 数字资源保存与管理的核心系统 | 采集/编目/审核/版权/管理员 | 统一组织模块与资源库能力；提供交互数据接口；触发长期保存 |
| 数字文物库 | 数字资源对外/对内开放平台（以藏品数据为基础） | 公众/研究员/策展人 | 检索、浏览高清大图；收藏/分享；资源申请与利用 |
| 数字多宝阁 | 可移动文物模型资源开放平台 | 公众/运营 | 对外发布三维资源，支持交互浏览与展示 |

## 3.2 资源库层（资产底座）
| 资源库 | 管理对象 | 核心特性 | 必备通用能力 |
|---|---|---|---|
| 影像资源库 | 静态图像（含超高清） | 切片/深度缩放、色彩空间管理、版本多 | 统一ID与版本；Fixity；元数据字典；索引；衍生生成；权限与审计 |
| 视频资源库 | 视频/音频 | 转码、多码率、关键帧与预览 | 同上，并补充转码策略与播放控制 |
| 模型资源库 | 3D 模型/贴图/点云 | 格式与渲染依赖、贴图关系 | 同上，并补充表示信息与渲染衍生 |

## 3.3 模块层（业务能力模块）
| 模块 | 目标 | 关键输出 |
|---|---|---|
| 资源采集模块 | 数据进入系统，保证完整性与可用性 | 入库批次、质检结果、主文件与最小元数据 |
| 资源利用模块 | 馆内/对外利用流程闭环 | 收藏夹/购物车/利用单/申请单；局部截取；交付包 |
| 资源授权模块 | 权利与许可闭环 | 权利状态、协议、使用范围、到期提醒、导出限制 |
| 资源展示模块 | 展示与浏览 | 详情页、缩略瀑布流、IIIF/Mirador 展示、检索控制 |
| 对外发布审核模块 | 对外发布可控、可审计 | 发布工单、审核记录、上线/交付包（DIP） |
| 长期保存模块 | 长期保存与交换 | BagIt 包、PREMIS 事件流、METS 结构、迁移/修复记录 |
| 人工智能模块 | 辅助编目与检索 | 标签/向量/推荐结果；人工校正与审计 |

## 3.4 关键外部系统/平台对接（来自流程图 OCR 与 PDF）
- 文物管理系统：与资源管理系统进行数据同步（资源/元数据/关联对象）。
- 古籍阅览平台：作为展示/访问端之一，对接 manifests URL 与资源展示能力。
- 故宫博物院藏古文字数字平台、藏品总目、故宫名画记/数字多宝阁等：作为上层应用或数据来源/展示端，对接资源展示与检索能力。

# 4. 关键流程
## 4.1 入库与传输（分离式 SIP + 端到端 Fixity）
依据 `DATA_INGEST_ARCHITECTURE.md`：
- 传输形态：`multipart/form-data` 分两部分上传：`file`（原始二进制流）+ `manifest`（JSON 字符串，含客户端计算 SHA256 与提取元数据）。
- 服务端入库：流式接收文件并计算服务端 Hash，与 manifest 的客户端 Hash 比对；一致后写入存储与数据库。
- 存储形态：解包存储（Unpacked），物理文件直接可被 IIIF 图像服务读取；数据库记录承载元数据。
- 导出形态：按需动态生成标准 BagIt 结构并打包 ZIP 返回（包含 bagit.txt、bag-info.txt、manifest-sha256.txt、data/ 载荷）。

## 4.2 代表影像标记（需求 需-0009）
- UI 形态：点亮/熄灭按钮（必须有强对比视觉反馈，避免误解）。
- 业务规则：点亮代表影像时，将同一文物的“代表影像标签”迁移到当前影像；若当前影像被修改/删除，标签自动回退到之前最后一张有效影像。

## 4.3 利用链路（收藏夹 → 购物车 → 利用单 → 交付）
依据 `资源管理需求表.xlsx`：
- 个人中心三件套：收藏夹、购物车、利用单。
- 收藏夹：整理、标注局部、导出、加入购物车；支持保存工作空间快照（需-0007）。
- 购物车：批量修改规格（需-0004）；生成利用单。
- 利用单：可复制（需-0002），可导入表格生成（需-0003），可导出/下载数据（需-0006）。
- 交付包：压缩包除影像外，必须附带“利用授权协议”与“元数据说明清单”（需-0005）。

## 4.4 对外发布审核（模块）
- 发布工单：选择资源 → 自动检查授权 → 提交审核 → 生成可对外分发版本（DIP）。
- 审计：所有审核动作、导出动作、发布动作必须可追溯（人、时间、原因、版本、交付内容）。

## 4.5 长期保存（BagIt + OAIS + PREMIS + METS）
依据需求 `需-0010` 与 PDF 概要设计：
- 使用 BagIt 封装数字内容，校验数据完整性。
- 按 OAIS 功能对标组织流程与职责。
- PREMIS：记录保存对象/事件/代理（导入、校验、迁移、修复、交付等）。
- METS：组织描述性、技术性、结构性元数据并支持交换。

# 5. 影像资源库设计（数据层/索引层/服务层/展示层）
本节以 PDF 概要设计第 3 页内容与 `文物二维影像元数据思维导图.png` OCR 为准。

## 5.1 数据层：元数据体系（共享 + 分类）
### 5.1.1 元数据分层
- 共享元数据：跨影像类型通用（管理/技术/保存等）。
- 分类元数据：按业务类型/对象差异（可移动文物、不可移动文物、艺术摄影、业务活动、全景、古树、考古等）。

### 5.1.2 共用元数据（管理元数据）字段清单（来自 Excel）
字段以 Excel 为准（是否有词表仅在 Excel 标注“有”的字段强制走词表）：

| 字段 | 是否有词表 |
|---|---|
| 项目类型 | 有 |
| 项目名称 |  |
| 摄影者/制作者 |  |
| 摄影者/制作者单位 |  |
| 版权所有 |  |
| 拍摄/制作时间 |  |
| 影像类别 |  |
| 影像名称 |  |
| 拍摄/制作内容 |  |
| 是否为代表影像 |  |
| 备注 |  |
| 影像标签 |  |
| 属性录入账号 |  |
| 属性录入时间 |  |
| 影像录入时间 |  |
| 原始文件名 |  |
| *影像文件名 |  |
| 对象标识符类型 |  |
| 对象标识符值 |  |
| 文件大小 |  |
| 格式名称 |  |
| 格式版本 |  |
| *格式注册表名称 |  |
| *格式注册表项 |  |
| *字节顺序 |  |
| *消息摘要算法 |  |
| *消息摘要 |  |
| *消息摘要生成器 |  |
| 图像宽度 |  |
| 图像高度 |  |
| 色彩空间 |  |

### 5.1.3 分类元数据字段清单（来自 Excel 全部 sheet）
**可移动文物**
- 文物号、文物名称、文物级别、文物类别、文物细类、管理科组、提照人员、提照人员电话、影像是否只对藏品管理者可见

**不可移动文物**
- 一级区域、二级区域、文物建筑名称、方位、部位一、部位二、部位三、建筑构件

**艺术摄影（含词表标注）**
- 艺术摄影类型（有）、藏品类型（有）、所在宫区、季节、植物、动物、节气、其他、主题、文化专题、展览专题

**业务活动**
- 主要地点、主要人物

**全景**
- 全景类型（备注：全景故宫、展览全景、）、位置

**古树**
- 档案编号、植物类型、植物名称、所在区域、具体位置、等级

**考古**
- 考古影像分类

## 5.2 数据层：数据标准与表示信息（来自 PDF 与 OCR）
- 技术元数据参考 ANSI/NISO Z39.87：Basic Digital Object Information、Basic Image Information、Image Capture Metadata、Image Assessment Metadata、Change History 等。
- 保存元数据参考 PREMIS：Fixity、事件、代理、权利等。
- 影像数据标准参考 IIIF；可移动文物二维数字化采集与加工参考 WW/T 0114—2023。
- 色彩标准：至少支持 sRGB / AdobeRGB 标识与转换策略。

## 5.3 数据存储
- 文件系统：ZFS（按概要设计给出的选型口径）。
- 数据库：PostgreSQL + JSONB 扩展（元数据与事件结构化存储）。

## 5.4 索引层
- 元数据搜索：Elasticsearch
- 向量搜索：Milvus
- 混合检索：Elasticsearch + Milvus（可配置权重）

## 5.5 服务层（影像处理）
- Libvips：缩略图生成、切片图生成、格式转换。

## 5.6 展示层
- 资源展示模块：Mirador（IIIF 查看器）对接。
- 多维度检索控制：受控词表检索、以图搜图搜索框、AI 搜索（自然语言描述 → LLM 解析关键词 → 匹配标签返回检索结果）。
- 详情页：元数据、版本、权利状态、申请与交付、事件摘要。
- 仪表盘：数字资产生命周期管理仪表盘、统计数据仪表盘、PREMIS 事件流。

# 6. 功能需求（来自“业务需求表”）
## 6.1 需求清单（逐条落地）
| 需求编号 | 层级 | 范围 | 需求描述（摘要） |
|---|---|---|---|
| 需-0001 | 数据库层 | 影像资源库 | 检索筛选增加“只查看最近年份图片”，过滤历史版本减少重复干扰 |
| 需-0002 | 模块层 | 资源利用模块 | 申请单复制：可勾选条目复制，继承规格与局部截取信息 |
| 需-0003 | 模块层 | 资源利用模块 | 申请单导入生成：按图片ID表或文物号列表批量生成条目 |
| 需-0004 | 模块层 | 资源利用模块 | 购物车/利用单支持勾选多项批量修改规格 |
| 需-0005 | 模块层 | 资源利用模块 | 交付压缩包附带“利用授权协议”“元数据说明清单” |
| 需-0006 | 模块层 | 资源利用模块 | 个人中心：收藏夹/购物车/利用单联动；收藏夹标注局部、导出、入车等 |
| 需-0007 | 模块层 | 资源利用模块 | 收藏夹可存储与查看工作空间快照 |
| 需-0008 | 模块层 | 资源采集模块 | 录入原始文件名：实际录入末四位数字以兼容多设备命名 |
| 需-0009 | 模块层 | 资源采集模块 | 代表影像点亮按钮与标签迁移/回退机制 |
| 需-0010 | 模块层 | 长期保存模块 | BagIt + OAIS + PREMIS + METS 构建长期保存模块 |

## 6.2 关键验收标准（针对需求表）
```gherkin
Scenario: 只查看最近年份图片
  Given 同一文物存在多个拍摄年份的影像版本
  When 用户勾选“只查看最近年份图片”
  Then 检索结果每件文物仅展示最新年份的代表影像版本，并可查看历史版本入口（受权限控制）

Scenario: 申请单复制（选择性复制）
  Given 用户存在一张包含多个条目的利用单
  When 用户选择部分条目点击复制
  Then 新申请单仅包含所选条目，且继承原条目的规格与局部截取信息

Scenario: 交付包附件完整
  Given 用户发起交付并生成压缩包
  When 用户下载交付包
  Then 压缩包包含处理完成影像文件 + 利用授权协议.txt + 元数据说明清单.txt
```

# 7. 权限与审计（最小闭环）
## 7.1 角色
- 采集人员、质检员、编目员、审核员、版权管理员、研究员/策展人、系统管理员、对外发布审核员

## 7.2 审计要求（CoreTrustSeal 对标）
- 对关键动作强制审计：导入、质检、编目、审核、授权变更、对外发布、导出/交付、Fixity 校验失败、修复/迁移。
- 审计要素：操作者、时间、对象（资源/版本/包）、原因、前后值、结果、关联工单/审批单。

# 8. 非功能需求（NFR）
- 性能：10 万条资源元数据规模下，常用检索 P95 < 2s（可按环境调整）；切片/缩略生成走异步队列。
- 可用性：检索/预览/授权校验为核心链路，提供 SLA 指标与降级策略。
- 安全：最小权限；对外交付必须经过授权与审核；敏感字段与受限资源默认不可导出原件。
- 可靠性：导入/衍生生成任务幂等；失败可重试；断点续传。
- 可观测：入库失败率、Fixity 失败、导出拒绝、权限异常、队列堆积告警。

# 9. 风险与待确认
## 9.1 风险
| 风险 | 影响 | 缓解 |
|---|---|---|
| 元数据口径分散 | 检索不可用、统计失真 | 元数据模板+词表+审核门禁；字段版本化与回滚 |
| 授权链路不闭环 | 合规风险、无法对外发布 | 授权模块前置校验；发布审核拦截；交付包带协议与审计 |
| 代表影像一致性问题 | 展示与检索错误 | 标签迁移与回退机制（需-0009） |
| 长期保存不可验证 | 数据损坏不可追溯 | Fixity + PREMIS 事件流 + BagIt + 灾备演练 |

## 9.2 待确认（≤5）
1) “只查看最近年份图片”与“代表影像”两者优先级与冲突规则。  
2) 交付包“元数据说明清单”的字段范围（管理元数据 + 技术元数据 + 描述元数据的最小必填集）。  
3) 权利状态枚举与默认策略（未知/受限的默认拦截范围）。  
4) Fixity 校验频率、修复责任与 RPO/RTO 目标值。  
5) 受控词表覆盖范围（哪些字段强制词表、词表来源与治理流程）。  

