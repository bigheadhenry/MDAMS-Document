---
name: "prd-architect"
description: "生成软件PRD（Markdown），含范围/需求拆解/流程/数据权限/非功能/验收与风险；当你要写/补/评审PRD或定义需求边界时调用。"
---

# PRD 设计助手（软件设计 PRD）

## 适用范围
- 面向：产品/项目负责人、业务方、研发/测试/设计协作团队
- 目标：产出可评审、可开发、可验收的 PRD（默认中文、Markdown）

## 何时调用（触发器）
- 你说：写PRD/补PRD/需求文档/产品需求/功能清单/需求评审/MVP/迭代拆解
- 你说：补充验收标准/补充非功能/补充权限矩阵/补充数据字典/补充流程图
- 你给一段散乱需求，希望我整理成“可交付 PRD”

## 使用方式（强约束）
1) 先做“最小必要澄清”（最多 12 问，按缺口提问，不问废话；允许你用 TBD 跳过未知项）
2) 先输出“PRD 大纲 + 范围边界”（让你快速确认方向）
3) 再按模块补齐：需求拆解→流程→数据/权限→非功能→验收→风险
4) 最后输出：质量门禁 Checklist + 待确认决策点（≤5 条）

## 1. 最小信息采集（≤12问）
按优先级提问（若你已给出，就跳过）：
1. 背景：这是新系统/新模块/存量优化？现有流程怎么跑？
2. 目标：要达成什么业务结果？为什么现在做？
3. 用户：谁用？频率/规模？最关键角色是谁？
4. 现状痛点：当前最昂贵/最频繁/最风险的问题是什么？
5. 成功指标：上线后如何判断成功（量化口径）？
6. 范围边界：本期必须做什么？明确不做什么？
7. 约束：时间/预算/合规/数据安全/可用性/SLA/上线窗口
8. 数据对象：核心实体是什么？关键字段/口径有哪些？
9. 权限与流程：是否有审核/审批/多角色协作？
10. 集成：要对接哪些系统/接口/导入导出？
11. 非功能重点：性能/并发/批量/可靠性/审计/备份/容灾
12. 里程碑：期望上线节奏、试点范围、验收方式

## 2. PRD 交付物模板（直接输出 Markdown）
你将按以下结构输出 PRD 内容；若用户只要“某一章”，则仅输出对应章节并补齐必要前置。

### 2.1 一页摘要（结论先行）
- 一句话结论：本次要交付什么能力（面向谁，解决什么问题）
- 背景（Situation）：
- 矛盾/痛点（Complication）：
- 关键问题（Question）：
- 本期结论（Answer）：In/Out、优先级、里程碑

### 2.2 背景与目标
- 背景：
- 目标（SMART）：
- 非目标（明确不做）：
- 术语表（统一口径）：

### 2.3 成功指标（Metric）
- 北极星指标：
- 关键过程指标（漏斗/产能/质量）：
- 指标口径与埋点需求（如适用）：

### 2.4 范围与优先级
用表格输出：

| 模块/能力 | 说明 | 优先级(P0/P1/P2 或 MoSCoW) | In/Out | 依赖/约束 |
|---|---|---|---|---|
|  |  |  |  |  |

### 2.5 用户与使用场景（Job Story）
用 Job Story 表达价值（避免直接写解决方案细节）：

| 角色 | 场景（When） | 诉求（I want） | 目的（so I can） | 频率/规模 | 备注 |
|---|---|---|---|---|---|
|  |  |  |  |  |  |

### 2.6 需求拆解（可开发、可验收）
每条需求必须包含：描述、业务规则、异常、验收、依赖。

| 编号 | 需求点 | 用户价值/背景 | 业务规则 | 异常/边界 | 验收标准（要可测试） | 优先级 | 依赖 |
|---|---|---|---|---|---|---|---|
| R-1 |  |  |  |  |  |  |  |

### 2.7 业务流程与状态
- 主流程（文字泳道或 Mermaid）
- 异常流程（失败、退回、重复、缺字段、权限不足等）
- 状态机（建议给出状态列表与迁移条件）

可选 Mermaid（示例）：

```mermaid
flowchart TD
  A[开始] --> B[提交]
  B --> C{校验通过?}
  C -- 否 --> D[提示错误/退回修改]
  C -- 是 --> E[进入审核]
  E --> F{审核通过?}
  F -- 否 --> D
  F -- 是 --> G[完成]
```

### 2.8 数据模型与字典
用“实体-字段”字典输出，并给口径/校验/示例：

| 实体 | 字段名 | 含义 | 类型 | 必填 | 校验规则 | 来源/生成方式 | 示例 | 备注 |
|---|---|---|---|---|---|---|---|---|
|  |  |  |  |  |  |  |  |  |

### 2.9 角色权限（RBAC）与审批规则
输出“角色-对象-权限”矩阵，并补齐审批/审计规则：

| 角色 \\ 对象 | 列表查看 | 详情查看 | 创建 | 编辑 | 删除 | 审核/审批 | 发布/生效 | 导出 | 配置 | 备注 |
|---|---:|---:|---:|---:|---:|---:|---:|---:|---:|---|
| 角色A |  |  |  |  |  |  |  |  |  |  |

### 2.10 集成与接口（可选）
- 对接清单：系统/用途/触发方式（同步/异步/批处理）/数据范围
- API 列表：路径、方法、请求字段、响应字段、错误码、幂等、重试策略
- 导入导出：格式、大小限制、断点续传、错误清单与重试

### 2.11 非功能需求（NFR）
按项目实际选择并量化（优先写可验证的指标/边界）：
- 性能：并发、吞吐、最大批量、查询延迟目标
- 可用性：SLA、降级策略、RPO/RTO（如适用）
- 可靠性：幂等、重试、任务补偿、断点续传
- 安全：最小权限、审计日志、加密、脱敏、密钥管理
- 可观测：日志/指标/追踪、告警、关键仪表盘
- 备份与恢复：备份周期、校验、恢复演练
- 合规：数据与内容合规、隐私、版权（如适用）

### 2.12 验收标准（必须可测试）
按模块给出 Gherkin 或量化条目：

```gherkin
Scenario: xxx
  Given ...
  When ...
  Then ...
```

### 2.13 风险与回滚
| 风险 | 触发条件 | 影响 | 缓解措施 | 监控/预警 | 回滚/止损 |
|---|---|---|---|---|---|
|  |  |  |  |  |  |

### 2.14 FAQ（用于评审对齐，参考 PR/FAQ）
按“用户/业务/法务合规/运营/技术”列出尖锐问题并预答：
- 用户会不会用？为什么不用现有方式？
- 价值是否足够大？最小可用范围是什么？
- 成本在哪里？哪些风险会拖垮项目？
- 合规/版权/审计是否闭环？
- 如何验收？上线后如何监控与迭代？

## 3. 质量门禁（Checklist）
交付前逐条自检，不满足就补齐：
- 目标与成功指标明确且可量化，口径一致
- In/Out 清晰，范围外明确写出
- 术语表统一，关键概念无歧义
- 每条需求“可开发、可测试、可验收”，含异常/边界
- 权限与流程闭环（谁能做什么、何时审批、日志如何审计）
- 数据口径一致（字段含义/来源/校验/示例齐全）
- 非功能可验证（至少给出边界值或验收方式）
- 风险可控（有缓解与回滚/止损）

## 4. 输出风格约束
- 先给“可交付内容”，再给“待确认问题”
- 表格优先；段落短句；避免堆砌术语
- 默认写“做什么/为什么/验收是什么”，不强行规定“怎么实现”（除非用户要求技术方案）

## 5. 示例调用
- “把这段散乱需求整理成一份可评审 PRD，并补齐验收与非功能。”
- “为数字资源管理系统写‘资源入库与元数据编目’模块 PRD（含流程、权限矩阵、数据字典）。”
- “我们要做一个审批流功能，帮我写 PRD 并补齐异常路径与回滚策略。”
- “写一个参考 OAIS + CoreTrustSeal，并采用 DDI 思路的‘数字资源长期保存与对外交付’PRD。”
## 6. 可选：博物馆数字资源管理系统（DAMS）偏好
当用户场景涉及博物馆数字化/数字资源管理时，优先补齐以下内容并使用相关术语：
- 资源类型：图片/音视频/3D/文档/档案；批次/资产/版本/衍生文件
- 关键流程：采集/导入→质检→编目→审核→入库→授权/发布→长期保存
- 元数据：字段模板、受控词表、馆藏编号/藏品关联、展览/作者/地点关联
- 版权合规：权利状态、许可类型、使用范围、到期提醒、水印/下载控制、审计日志
- 存储与长期保存：校验和、存储分层、备份与恢复、格式迁移策略（如适用）

### 6.1 可选：参照 OAIS 的写法（长期保存导向）
当用户明确要求“参考 OAIS/长期保存/数字保管库”时，在 PRD 中增加以下内容：
- 指定社区（Designated Community）：明确面向哪些使用者群体“可理解、可使用”，并定义其知识基础边界
- 信息包（Information Package）：
  - SIP（Submission Information Package）：生产者提交包（原始文件 + 采集/编目元数据 + 授权证明等）
  - AIP（Archival Information Package）：馆内保存包（主/衍生文件 + 完整保存元数据 + 校验信息 + 版本记录等）
  - DIP（Dissemination Information Package）：对外/对内分发包（按权限生成的导出物与说明）
- 关键信息对象：
  - Representation Information：让“比特可理解”的格式/解码/说明（如编解码、3D格式、色彩空间等）
  - Preservation Description Information（PDI）：至少覆盖来源/责任、标识、完整性校验、版本与事件记录
- 功能域映射（OAIS 六大功能实体 → 系统模块）：
  - Ingest：采集/导入、质检、SIP 校验、AIP 生成
  - Archival Storage：分层存储、校验/修复、复制/迁移、灾备
  - Data Management：描述元数据、索引、词表/实体库、管理数据
  - Preservation Planning：格式风险监测、迁移策略、保全规则与评估
  - Access：检索、申请与授权、生成 DIP、交付与审计
  - Administration：策略配置、提交协议、角色权限、运营与报表、合规与审计

### 6.2 可选：参照 CESSDA/ICPSR/DMEG 的数据归档写法（数据可复用导向）
当用户明确要求“参考 CESSDA Data Archiving Guide / Guide to Social Science Data Preparation and Archiving / Data Management Expert Guide”时，在 PRD 中增加以下内容：
- 提交协议与交付清单：明确提交者需要提供的数据、文档与声明（文件、README、采集/生产说明、权利与许可、敏感信息处理说明）
- 文件格式与版本：明确首选格式策略、版本/版次管理规则、命名规则、目录结构
- 数据质量与可理解性：定义“可独立解读”的最低标准（字段/标签/取值说明、缺失值编码、变量口径、示例）
- 数据保护与访问分级：明确匿名化/脱敏策略、访问类别（开放/注册/受限/Embargo）、申请与审批流程
- 许可与复用：明确许可协议、引用方式、使用限制与追责边界
- 持久标识与引用：定义资源/数据集/版本的 PID 策略（如 DOI/URN 等）与引用格式，确保可追溯与可复现
- 元数据与受控词表：明确采用的元数据标准与词表（如 DDI、受控词表），以及“必填/可选”字段规则
- 运营与推广（可选）：统计与使用反馈、数据发现（目录/对外检索/元数据开放）、推广机制

### 6.3 参考标准与认证（写入 PRD 的“对标依据”）
当需要在 PRD 中声明“遵循/参考哪些标准与认证”时，输出下表（可直接复制）：

| 标准名称 | 核心内容 | 作用 |
|---|---|---|
| OAIS (ISO 14721) | 开放档案信息系统参考模型 | 所有现代数据存档机构的通用功能架构标准。 |
| DDI (Data Documentation Initiative) | 数据文档规范 | 社会科学领域最通用的元数据标准，用于详细描述调查数据。 |
| CoreTrustSeal | 受信任数字存储库要求 | 定义了一个“权威存档机构”必须具备的 16 条核心准则。 |

### 6.4 参考指南（将指南要点落地为 PRD 可验收条目）
当用户要“对标行业指南/写出更可复用的归档要求”时，补充下表：

| 指南名称 | 核心内容（提炼） | 作用（落地到系统/PRD） |
|---|---|---|
| CESSDA Data Archiving Guide（DAG） | 归档全流程：提交协议、格式策略、元数据与发现、许可与访问分级、SIP/AIP/DIP 与 OAIS 对齐 | 把“提交-保存-访问”流程写清楚，并把访问类别、许可、元数据开放与收割（harvesting）作为验收点 |
| Guide to Social Science Data Preparation and Archiving（ICPSR） | 数据与文档准备清单：变量/取值标签、缺失值编码、代码本/问卷/README、可独立解读与复现 | 把“可理解性/可复现性”写成入库质量门禁与质检规则，形成可测试验收 |
| Data Management Expert Guide（DMEG, CESSDA） | 数据管理生命周期：DMP、组织与文档、处理、存储备份、保护（合规/同意/匿名化）、归档发布（许可/PID/引用） | 把 DMP 问题转成系统配置项与流程（字段模板、命名、备份、访问控制、许可、引用/统计）并纳入非功能与合规验收 |
